!function(e,t,a,i){function n(t,a){this.element=t,this.options=e.extend({},s,a),this._defaults=s,this._name=o,this.chart="",this.navData=[],this.distData=[],this.init()}this.navDecimal=2;var o="fondulNavChart",s={prefix:"",seriesName:"NAV",secondSeriesName:"Distribution Adjusted NAV"};n.prototype={reload:function(){console.log("reload"),this.init()},init:function(){var t=this;return t.chart=e(t.element).find(".chart:visible").first(),t.chart.data("ftiJson")?(this.jsonURL=t.chart.data("ftiJson"),void(0===t.navData.length&&(t.addLoader(),frk.load(this.jsonURL,"json").then(function(e){if("undefined"!=typeof e.productsVO.priceDetVO){for(var a=e.productsVO.priceDetVO[0].navDet,i=[],n=[],o=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY,r=1;r<a.length;r++){var l=Date.parse(moment(a[r].navdt));parseFloat(a[r].nav)<o&&(o=parseFloat(a[r].nav)),parseFloat(a[r].nav)>s&&(s=parseFloat(a[r].nav)),i.push([l,parseFloat(a[r].nav)]),n.push([l,parseFloat(a[r].nav-1)])}t.mindata=null,t.maxdata=null,t.navData=JSON.parse(JSON.stringify(i)),t.distData=JSON.parse(JSON.stringify(n)),t.buildChart()}else t.showErrorMessage()},function(){t.showErrorMessage()})))):null},showErrorMessage:function(){var t=this;e(t.element).find("#loader").remove()},buildChart:function(){var e=this;e.removeLoader(),e.chart.highcharts({exporting:{enabled:!1},legend:{enabled:!0},xAxis:{type:"datetime",minRange:864e5,minTickInterval:864e5},yAxis:{labels:{format:e.options.prefix+"{value}"},title:"",min:e.mindata,max:e.maxdata},plotOptions:{series:{fillOpacity:0,marker:{enabled:!1}}},title:{text:""},credits:{enabled:!1},tooltip:{shared:!0,crosshairs:!0},series:[{name:e.options.seriesName,data:e.navData,type:"area",tooltip:{pointFormat:'<span style="color:{point.color}">●</span> {series.name}: <b>{point.y}</b><br/>',valueDecimals:navDecimal,valuePrefix:e.options.prefix}},{name:e.options.secondSeriesName,data:e.distData,type:"area",tooltip:{pointFormat:'<span style="color:{point.color}">●</span> {series.name}: <b>{point.y}</b><br/>',valueDecimals:navDecimal,valuePrefix:e.options.prefix}}]})},addLoader:function(){var t=this;e(t.element).find("#loader").remove(),e(t.element).append('<div id="loader" style="background-color:white;position:absolute;width:100%;height:100%;left:0; top:0;z-index:100;opacity:0.75;"><div class="loader">Loading...</div></div>')},removeLoader:function(){var a=this;t.setTimeout(function(){e(a.element).find("#loader").remove()},500)}},e.fn[o]=function(t){return this.each(function(){e.data(this,"component_"+o)?(console.log(e.data(this,"component_"+o)),e.data(this,"component_"+o).reload()):e.data(this,"component_"+o,new n(this,t))})}}(jQuery,window,document);